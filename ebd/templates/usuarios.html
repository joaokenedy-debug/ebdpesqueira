<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Lista de Usuários</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px 12px;
            border: 1px solid #333;
            text-align: center;
        }
        th {
            background-color: #007bff;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        h1 {
            text-align: center;
        }
        button {
            padding: 5px 10px;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 4px;
        }
        .btn-admin {
            background-color: #28a745;
        }
        .btn-admin:hover {
            background-color: #218838;
        }
        .btn-delete {
            background-color: #dc3545;
        }
        .btn-delete:hover {
            background-color: #c82333;
        }
    </style>
</head>
<body>
    <nav class="nav nav-pills nav-fill" style="background-color:rgb(20, 79, 187); display: flex; justify-content: center; gap: 50px; padding: 20px;">
        <h3 style="margin: 0; display: flex; gap: 100px;">
            <a class="nav-link disabled" aria-disabled="true" style="color: aliceblue;" href="{{ url_for('adm', id_usuario=current_user.id) }}">Fazer Pedido</a>
        </h3>
    </nav>

    <h1>Lista de Usuários</h1>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Email</th>
                <th>Congregação</th>
                <th>Administrador</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for user in usuarios %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.nome }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.congregacao }}</td>
                <td>{{ "Sim" if user.is_admin else "Não" }}</td>
                <td style="display: flex; gap: 8px; justify-content: center;">
                    {% if not user.is_admin %}
                    <form method="POST" action="{{ url_for('tornar_admin', user_id=user.id) }}">
                        <button type="submit" class="btn-admin">Tornar Admin</button>
                    </form>
                    {% endif %}
                    <form method="POST" action="{{ url_for('deletar_usuario', user_id=user.id) }}">
                        <button type="submit" class="btn-delete" onclick="return confirm('Tem certeza que deseja excluir este usuário?')">Excluir</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
